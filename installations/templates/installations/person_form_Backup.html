{% extends "installations/base.html" %}

{% block main_content %}

    <h2>
        {% if not form.instance.pk %}
            Add Person
        {% else %}
            Update Person "{{form.instance.name}}"
        {% endif %}
    </h2>


<form method="post">
{% csrf_token %}
    {# Edit-Minimize Tab#}
    <ul class="nav nav-tabs">
    <li class="nav-item">
        <a href="#Edit" id='Edita' class="nav-link" data-toggle="tab">
		<i class="fas fa-pen"></i></a>
    </li>
    <li class="nav-item">
        <a href="#Minimize" id='Minimizea' class="nav-link" data-toggle="tab">
		<i class="fas fa-window-minimize"></i></a>
    </li>
    </ul>
    {# Edit-Minimize Tab content #}
    <div class="tab-content">
        <div class="tab-pane fade in show active" id="Edit">
        <p class="mb-4"></p>
        <!-- person form is defined in a separate template -->
        {% include 'installations/_person_form.html' %}
        </div>
        <div class="tab-pane fade" id="Minimize">
            <!-- you can minimize the form -->
            <br>
            <h5 class="mb-1">Hello </h5>
            <br>
        </div>
    </div>

<ul class="nav nav-tabs" id="myTab" role="tablist">
  <li class="nav-item">
    <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">Home</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" id="profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile" aria-selected="false">Profile</a>
  </li>
  <li class="nav-item">
    <a class="nav-link" id="contact-tab" data-toggle="tab" href="#contact" role="tab" aria-controls="contact" aria-selected="false">Contact</a>
  </li>
</ul>
<div class="tab-content" id="myTabContent">
  <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">...</div>
  <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">...2</div>
  <div class="tab-pane fade" id="contact" role="tabpanel" aria-labelledby="contact-tab">...3</div>
</div>


    <ul class="nav nav-tabs" id="relationsTab" role="tablist">
        {% for name in tabs.relations.tab_names %}
            <li class="nav-item">
                <a href="#{{name}}" id='{{name}}a' class="nav-link" data-toggle="tab" role="tab" aria-controls="{{name}}">{{name}}</a>
            </li>
        {% endfor %}
    </ul>

    {# Relations tab content #}
    <div class="tab-content">
        <div class="tab-pane fade show active" id="City">
            {{personcity_formset.management_form}}
            <table class="table table-borderless">
            <tr class ="d-flex">
            <th class="col-5">City
                <a class = "btn btn-link btn-sm ml-auto" target = "_blank"
                    href ="{% url 'installations:city-insert' %}" role="button">
                     <i class="fa fa-plus"></i></a>
            </th>
            <th class="col-3">Type of involvement
                <a class = "btn btn-link btn-sm ml-auto" target = "_blank"
                    href ="{% url 'installations:citypersonrelation-insert'  %}" role="button">
                     <i class="fa fa-plus"></i></a>
                </th>
            <th><i class="fa fa-times text-danger"></i></th>
            </tr>
            {% for f in personcity_formset.forms %}
                <tr class ="d-flex">
                <td class="col-5">{{f.city}} {{f.city.errors}}</td>
                <td class="col-3">{{f.type_of_involvement}} {{f.type_of_involvement.errors}}</td>
                <td class="col-1">{{f.DELETE}} {{f.id}}</td>
                </tr>
            {% endfor %}
            </table>
        </div>

        <div class="tab-pane fade" id="Neighbourhood">
            {{personneighbourhood_formset.management_form}}
            <table class="table table-borderless">
            <tr class ="d-flex">
            <th class="col-5">Neighbourhood
                <a class = "btn btn-link btn-sm ml-auto" target = "_blank"
                    href ="{% url 'installations:city-insert' %}" role="button">
                     <i class="fa fa-plus"></i></a>
            </th>
            <th class="col-3">Type of involvement
                <a class = "btn btn-link btn-sm ml-auto" target = "_blank"
                    href ="{% url 'installations:citypersonrelation-insert'  %}" role="button">
                     <i class="fa fa-plus"></i></a>
                </th>
            <th><i class="fa fa-times text-danger"></i></th>
            </tr>
            {% for f in personcity_formset.forms %}
                <tr class ="d-flex">
                <td class="col-5">{{f.city}} {{f.city.errors}}</td>
                <td class="col-3">{{f.type_of_involvement}} {{f.type_of_involvement.errors}}</td>
                <td class="col-1">{{f.DELETE}} {{f.id}}</td>
                </tr>
            {% endfor %}
            </table>
        </div>

        <div class="tab-pane fade" id="Institution">
            {{personcity_formset.management_form}}
            <table class="table table-borderless">
            <tr class ="d-flex">
            <th class="col-5">Institution
                <a class = "btn btn-link btn-sm ml-auto" target = "_blank"
                    href ="{% url 'installations:city-insert' %}" role="button">
                     <i class="fa fa-plus"></i></a>
            </th>
            <th class="col-3">Type of involvement
                <a class = "btn btn-link btn-sm ml-auto" target = "_blank"
                    href ="{% url 'installations:citypersonrelation-insert'  %}" role="button">
                     <i class="fa fa-plus"></i></a>
                </th>
            <th><i class="fa fa-times text-danger"></i></th>
            </tr>
            {% for f in personcity_formset.forms %}
                <tr class ="d-flex">
                <td class="col-5">{{f.city}} {{f.city.errors}}</td>
                <td class="col-3">{{f.type_of_involvement}} {{f.type_of_involvement.errors}}</td>
                <td class="col-1">{{f.DELETE}} {{f.id}}</td>
                </tr>
            {% endfor %}
            </table>
        </div>

    </div>


{#{% include 'utilities/relation_tabs.html' %}#}



        <div class="form-group">
            {% if not form.instance.pk %}
                <button type="submit" class="btn btn-success"><i class="fa fa-database"></i>Save</button>
            {% else %}
                <button type="submit" class="btn btn-success"><i class="fa fa-database"></i>Update</button>
            {% endif %}
            <a href="{% url 'installations:person-list' %}" class="btn btn-default">Cancel</a>
        </div>

    </form>

{% endblock %}